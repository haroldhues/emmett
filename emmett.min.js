/**
 * emmett - A custom event emitter for Node.js and the browser.
 * @version v3.0.0
 * @link https://github.com/jacomyal/emmett
 * @license MIT
 */
(function(){"use strict";function e(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r}function t(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Function)}var n={once:"boolean",scope:"object"},r=0,s=function(){this._enabled=!0,this._handlers={},this._handlersAll=[],this._handlersComplex=[]};s.prototype.on=function(e,h,l){var i,o,a,d,p,f,u;if("function"==typeof h){for(p=[].concat(e),i=0,o=p.length;o>i;i++)if(d=p[i]){u={order:r++,handler:h},d instanceof RegExp?(f=this._handlersComplex,u.pattern=d):(this._handlers[d]||(this._handlers[d]=[]),f=this._handlers[d]);for(a in l||{})n[a]&&(u[a]=l[a]);u.once&&(u.parent=this._handlers[d]),f.push(u)}}else if(t(e))for(d in e)s.prototype.on.call(this,d,e[d],h);else{if("function"!=typeof e)throw new Error("Emitter.on: wrong arguments.");u={order:r,handler:e};for(a in l||{})n[a]&&(u[a]=l[a]);u.once&&(u.parent=this._handlersAll),this._handlersAll.push(u)}return this},s.prototype.once=function(){var n=Array.prototype.slice.call(arguments),r=n.length-1;return t(n[r])&&n.length>1?n[r]=e(n[r],{once:!0}):n.push({once:!0}),this.on.apply(this,n)},s.prototype.off=function(e,t){var n,r,s,h,l,i,o,a="string"==typeof e?[e]:e;if(1===arguments.length&&"function"==typeof a){t=arguments[0];for(l in this._handlers){for(i=[],n=0,r=this._handlers[l].length;r>n;n++)this._handlers[l][n].handler!==t&&i.push(this._handlers[l][n]);this._handlers[l]=i,0===this._handlers[l].length&&delete this._handlers[l]}for(i=[],n=0,r=this._handlersAll.length;r>n;n++)this._handlersAll[n].handler!==t&&i.push(this._handlersAll[n]);this._handlersAll=i}else if(2===arguments.length)for(n=0,r=a.length;r>n;n++){if(o=a[n],this._handlers[o]){for(i=[],s=0,h=this._handlers[o].length;h>s;s++)this._handlers[o][s].handler!==t&&i.push(this._handlers[o][s]);this._handlers[o]=i}this._handlers[o]&&0===this._handlers[o].length&&delete this._handlers[o]}return this},s.prototype.unbindAll=function(){var e;this._handlersAll=[],this._handlersComplex=[];for(e in this._handlers)delete this._handlers[e];return this},s.prototype.listeners=function(e){var t,n,r,s=this._handlersAll||[];if(!e)throw Error("Emitter.listeners: no event provided.");for(s=s.concat(this._handlers[e]||[]),n=0,r=this._handlersComplex.length;r>n;n++)t=this._handlersComplex[n],~e.search(t.pattern)&&s.push(t);return this._handlersAll.length||this._handlersComplex.length?s.sort(function(e,t){return e.order-t.order}):s.slice(0)},s.prototype.emit=function(e,n){if(!this._enabled)return this;if(t(e)){for(var r in e)s.prototype.emit.call(this,r,e[r]);return this}var h,l,i,o,a,d,p,f=[].concat(e),u=[];for(n=void 0===n?{}:n,o=0,d=f.length;d>o;o++){for(l=this.listeners(f[o]),a=0,p=l.length;p>a;a++)i=l[a],h={type:f[o],data:n,target:this},i.handler.call("scope"in i?i.scope:this,h),i.once&&u.push(i);for(a=0,p=u.length;p>a;a++)u[a].parent.splice(u[a].parent.indexOf(u[a]),1)}return this},s.prototype.kill=function(){this.emit("emmett:kill"),this.unbindAll(),this._handlers=null,this._handlersAll=null,this._handlersComplex=null,this._enabled=!1},s.prototype.disable=function(){return this._enabled=!1,this},s.prototype.enable=function(){return this._enabled=!0,this},s.version="3.0.0","undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports.Emitter=s):"function"==typeof define&&define.amd?define("emmett",[],function(){return s}):this.Emitter=s}).call(this);