/**
 * emmett - A custom events emitter for Node.js and the browser
 * @version v2.1.2
 * @link https://github.com/jacomyal/emmett
 * @license MIT
 */
(function(){"use strict";function e(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r}function t(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Function)}function n(e){var t,n,r=[];for(t=0,n=e.length;n>t;t++)r.push(e[t].handler);return r}var r={once:"boolean",scope:"object"},h=function(){this._enabled=!0,this._children=[],this._handlers={},this._handlersAll=[]};h.prototype.on=function(e,n,i){var l,s,o,a,d,f;if("function"==typeof n){for(d=[].concat(e),l=0,s=d.length;s>l;l++)if(a=d[l]){this._handlers[a]||(this._handlers[a]=[]),f={handler:n};for(o in i||{})r[o]&&(f[o]=i[o]);this._handlers[a].push(f)}}else if(t(e))for(a in e)h.prototype.on.call(this,a,e[a],n);else{if("function"!=typeof e)throw new Error("Emitter.on: wrong arguments.");f={handler:e};for(o in i||{})r[o]&&(f[o]=i[o]);this._handlersAll.push(f)}return this},h.prototype.once=function(){var n=Array.prototype.slice.call(arguments),r=n.length-1;return t(n[r])&&n.length>1?n[r]=e(n[r],{once:!0}):n.push({once:!0}),this.on.apply(this,n)},h.prototype.off=function(e,t){var n,r,h,i,l,s,o,a="string"==typeof e?[e]:e;if(1===arguments.length&&"function"==typeof a){t=arguments[0];for(l in this._handlers){for(s=[],n=0,r=this._handlers[l].length;r>n;n++)this._handlers[l][n].handler!==t&&s.push(this._handlers[l][n]);this._handlers[l]=s,0===this._handlers[l].length&&delete this._handlers[l]}for(s=[],n=0,r=this._handlersAll.length;r>n;n++)this._handlersAll[n].handler!==t&&s.push(this._handlersAll[n]);this._handlersAll=s}else if(2===arguments.length)for(n=0,r=a.length;r>n;n++){if(o=a[n],this._handlers[o]){for(s=[],h=0,i=this._handlers[o].length;i>h;h++)this._handlers[o][h].handler!==t&&s.push(this._handlers[o][h]);this._handlers[o]=s}this._handlers[o]&&0===this._handlers[o].length&&delete this._handlers[o]}return this},h.prototype.unbindAll=function(){var e;this._handlersAll=[];for(e in this._handlers)delete this._handlers[e];return this},h.prototype.emit=function(e,t){var n,r,h,i,l,s,o,a,d,f,c="string"==typeof e?[e]:e;if(!this._enabled)return this;for(t=void 0===t?{}:t,n=0,r=c.length;r>n;n++)if(f=c[n],d=(this._handlers[f]||[]).concat(this._handlersAll),d.length){for(o={type:f,data:t||{},target:this},s=[],h=0,i=d.length;i>h;h++)(this._handlers[f]&&this._handlers[f].indexOf(d[h])>=0||this._handlersAll.indexOf(d[h])>=0)&&(d[h].handler.call("scope"in d[h]?d[h].scope:this,o),d[h].once&&s.push(d[h]));for(l=0;l<s.length;l++)this._handlers[f].splice(s.indexOf(s[l]),1)}for(n=0,r=this._children.length;r>n;n++)a=this._children[n],a.emit.apply(a,arguments);return this},h.prototype.child=function(){var e=this,t=new h;return t.on("emmett:kill",function(){if(e._children)for(var n=0,r=e._children.length;r>n;n++)if(e._children[n]===t){e._children.splice(n,1);break}}),this._children.push(t),t},h.prototype.listeners=function(e){var t,r,h,i=[];if(e)for(i=n(this._handlers[e]),r=0,h=this._children.length;h>r;r++)i=i.concat(this._children[r].listeners(e));else{i=n(this._handlersAll);for(t in this._handlers)i=i.concat(n(this._handlers[t]));for(r=0,h=this._children.length;h>r;r++)i=i.concat(this._children[r].listeners())}return i},h.prototype.kill=function(){if(this.emit("emmett:kill"),this.unbindAll(),this._handlers=null,this._handlersAll=null,this._enabled=!1,this._children)for(var e=0,t=this._children.length;t>e;e++)this._children[e].kill();this._children=null},h.prototype.disable=function(){return this._enabled=!1,this},h.prototype.enable=function(){return this._enabled=!0,this},h.version="2.1.2","undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports.Emitter=h):"function"==typeof define&&define.amd?define("emmett",[],function(){return h}):this.Emitter=h}).call(this);