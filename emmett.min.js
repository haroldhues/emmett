/**
 * emmett - A custom event emitter for Node.js and the browser.
 * @version v3.0.0
 * @link https://github.com/jacomyal/emmett
 * @license MIT
 */
(function(){"use strict";function e(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r}function t(e){return!(!e||"object"!=typeof e||Array.isArray(e)||e instanceof Function||e instanceof RegExp)}var n={once:"boolean",scope:"object"},r=0,s=function(){this._enabled=!0,this._handlers={},this._handlersAll=[],this._handlersComplex=[]};s.prototype.on=function(e,l,h){var i,o,a,d,p,f,u;if(t(e)){for(d in e)s.prototype.on.call(this,d,e[d],l);return this}for("function"==typeof e&&(h=l,l=e,e=null),p=[].concat(e),i=0,o=p.length;o>i;i++){if(d=p[i],u={order:r++,handler:l},"string"==typeof d)this._handlers[d]||(this._handlers[d]=[]),f=this._handlers[d];else if(d instanceof RegExp)f=this._handlersComplex,u.pattern=d;else{if(null!==d)throw Error("Emitter.on: invalid event.");f=this._handlersAll}for(a in h||{})n[a]&&(u[a]=h[a]);u.once&&(u.parent=f),f.push(u)}return this},s.prototype.once=function(){var n=Array.prototype.slice.call(arguments),r=n.length-1;return t(n[r])&&n.length>1?n[r]=e(n[r],{once:!0}):n.push({once:!0}),this.on.apply(this,n)},s.prototype.off=function(e,n){var r,l,h,i,o,a,d;if(1===arguments.length&&"function"==typeof e){n=arguments[0];for(o in this._handlers){for(a=[],r=0,l=this._handlers[o].length;l>r;r++)this._handlers[o][r].handler!==n&&a.push(this._handlers[o][r]);this._handlers[o]=a,0===this._handlers[o].length&&delete this._handlers[o]}for(a=[],r=0,l=this._handlersAll.length;l>r;r++)this._handlersAll[r].handler!==n&&a.push(this._handlersAll[r]);for(this._handlersAll=a,a=[],r=0,l=this._handlersComplex.length;l>r;r++)this._handlersComplex[r].handler!==n&&a.push(this._handlersComplex[r]);this._handlersComplex=a}else if(1===arguments.length&&"string"==typeof e)delete this._handlers[e];else if(2===arguments.length){var p=[].concat(e);for(r=0,l=p.length;l>r;r++){if(d=p[r],this._handlers[d]){for(a=[],h=0,i=this._handlers[d].length;i>h;h++)this._handlers[d][h].handler!==n&&a.push(this._handlers[d][h]);this._handlers[d]=a}this._handlers[d]&&0===this._handlers[d].length&&delete this._handlers[d]}}else if(t(e))for(o in e)s.prototype.off.call(this,o,e[o]);return this},s.prototype.unbindAll=function(){var e;this._handlersAll=[],this._handlersComplex=[];for(e in this._handlers)delete this._handlers[e];return this},s.prototype.listeners=function(e){var t,n,r,s=this._handlersAll||[];if(!e)throw Error("Emitter.listeners: no event provided.");for(s=s.concat(this._handlers[e]||[]),n=0,r=this._handlersComplex.length;r>n;n++)t=this._handlersComplex[n],~e.search(t.pattern)&&s.push(t);return this._handlersAll.length||this._handlersComplex.length?s.sort(function(e,t){return e.order-t.order}):s.slice(0)},s.prototype.emit=function(e,n){if(!this._enabled)return this;if(t(e)){for(var r in e)s.prototype.emit.call(this,r,e[r]);return this}var l,h,i,o,a,d,p,f=[].concat(e),u=[];for(o=0,d=f.length;d>o;o++){for(h=this.listeners(f[o]),a=0,p=h.length;p>a;a++)i=h[a],l={type:f[o],target:this},arguments.length>1&&(l.data=n),i.handler.call("scope"in i?i.scope:this,l),i.once&&u.push(i);for(a=0,p=u.length;p>a;a++)u[a].parent.splice(u[a].parent.indexOf(u[a]),1)}return this},s.prototype.kill=function(){this.unbindAll(),this._handlers=null,this._handlersAll=null,this._handlersComplex=null,this._enabled=!1},s.prototype.disable=function(){return this._enabled=!1,this},s.prototype.enable=function(){return this._enabled=!0,this},s.version="3.0.0","undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports.Emitter=s):"function"==typeof define&&define.amd?define("emmett",[],function(){return s}):this.Emitter=s}).call(this);