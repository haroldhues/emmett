/**
 * emmett - A custom events emitter for Node.js and the browser
 * @version v2.1.2
 * @link https://github.com/jacomyal/emmett
 * @license MIT
 */
(function(){"use strict";function t(t,e){var n,r={};for(n in t)r[n]=t[n];for(n in e)r[n]=e[n];return r}function e(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!(t instanceof Function)}var n={once:"boolean",scope:"object"},r=function(){this._enabled=!0,this._handlers={},this._handlersAll=[]};r.prototype.on=function(t,s,i){var h,l,o,a,d,f;if("function"==typeof s){for(d=[].concat(t),h=0,l=d.length;l>h;h++)if(a=d[h]){this._handlers[a]||(this._handlers[a]=[]),f={handler:s};for(o in i||{})n[o]&&(f[o]=i[o]);f.once&&(f.parent=this._handlers[a]),this._handlers[a].push(f)}}else if(e(t))for(a in t)r.prototype.on.call(this,a,t[a],s);else{if("function"!=typeof t)throw new Error("Emitter.on: wrong arguments.");f={handler:t};for(o in i||{})n[o]&&(f[o]=i[o]);f.once&&(f.parent=this._handlersAll),this._handlersAll.push(f)}return this},r.prototype.once=function(){var n=Array.prototype.slice.call(arguments),r=n.length-1;return e(n[r])&&n.length>1?n[r]=t(n[r],{once:!0}):n.push({once:!0}),this.on.apply(this,n)},r.prototype.off=function(t,e){var n,r,s,i,h,l,o,a="string"==typeof t?[t]:t;if(1===arguments.length&&"function"==typeof a){e=arguments[0];for(h in this._handlers){for(l=[],n=0,r=this._handlers[h].length;r>n;n++)this._handlers[h][n].handler!==e&&l.push(this._handlers[h][n]);this._handlers[h]=l,0===this._handlers[h].length&&delete this._handlers[h]}for(l=[],n=0,r=this._handlersAll.length;r>n;n++)this._handlersAll[n].handler!==e&&l.push(this._handlersAll[n]);this._handlersAll=l}else if(2===arguments.length)for(n=0,r=a.length;r>n;n++){if(o=a[n],this._handlers[o]){for(l=[],s=0,i=this._handlers[o].length;i>s;s++)this._handlers[o][s].handler!==e&&l.push(this._handlers[o][s]);this._handlers[o]=l}this._handlers[o]&&0===this._handlers[o].length&&delete this._handlers[o]}return this},r.prototype.unbindAll=function(){var t;this._handlersAll=[];for(t in this._handlers)delete this._handlers[t];return this},r.prototype.listeners=function(t){var e,n=this._handlersAll||[];if(t)n=n.concat(this._handlers[t]||[]);else for(e in this._handlers)n=n.concat(this._handlers[e]||[]);return n.slice(0)},r.prototype.emit=function(t,n){if(!this._enabled)return this;if(e(t)){for(var s in t)r.prototype.emit.call(this,s,t[s]);return this}var i,h,l,o,a,d,f,p=[].concat(t),u=[];for(n=void 0===n?{}:n,o=0,d=p.length;d>o;o++){for(h=this.listeners(p[o]),a=0,f=h.length;f>a;a++)l=h[a],i={type:p[o],data:n,target:this},l.handler.call("scope"in l?l.scope:this,i),l.once&&u.push(l);for(a=0,f=u.length;f>a;a++)u[a].parent.splice(u[a].parent.indexOf(u[a]),1)}return this},r.prototype.kill=function(){this.emit("emmett:kill"),this.unbindAll(),this._handlers=null,this._handlersAll=null,this._enabled=!1},r.prototype.disable=function(){return this._enabled=!1,this},r.prototype.enable=function(){return this._enabled=!0,this},r.version="2.1.2","undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports.Emitter=r):"function"==typeof define&&define.amd?define("emmett",[],function(){return r}):this.Emitter=r}).call(this);